# 2018-Graduate-Mathematical-Modeling-Competition-B
This project is the problem solving code for the Question B of the graduate mathematics modeling competition. Modeling of Fibre Channel and Fiber Network Value

# 本代码是研究生数学建模竞赛的解题代码,三个问题分别在三个文件夹中.

本文使用的工具包有

1. deap
2. gurobi
3. numpy
4. matplotlib

环境说明:

1. ubuntu 16.04
2. python3.5 
3. gurobi 8.0.1 
4. matlab 2017 b for ubuntu 
5. vscode 

如果你对代码有任何疑问,请发邮件到 

zangzelin@gmail.com

对应的博客有较详细的思路阐述:
https://www.cnblogs.com/zangzelin/p/9689744.html 

#2018年中国研究生数学建模竞赛B题
光传送网建模与价值评估
## 1. 背景
2009年诺贝尔物理学奖授予了英籍华人高锟（Charles K. Kao）博士，以表彰他对光纤通信发展所做出的贡献，诺贝尔奖委员会在给公众的公开信中写到：
“当诺贝尔物理学奖宣布的时候，世界大部分地方几乎瞬间收到了这条信息…文字、语音和视频信号沿着光纤在世界各地来回传输，几乎瞬时地被微小而便捷的设备接收，人们已经把这种情况当做习惯。光纤通信正是整个通信领域急速发展的前提。”
从诞生至今，50多年里基于数字光纤通信技术的光传送网构建起了全球通信的骨架。从城市内的传输，直到跨越大洋的传输，光传送网为人类提供了大容量、高可靠性和低能耗的信息传输管道，人类对通信容量的追求也成为光传送技术发展的源源不断的动力。
光传送网的规划与建设是运营商、设备商以及政府必须考虑的课题。光传送的基本规律是——在相同技术条件下传输的容量会随着传输距离增加而减小。网络规划者需要在有限资源的条件下，综合考虑传输距离，传输容量、网络拓扑等各种因素，以最大化网络的价值。本课题中，请你们站在上述角度，从底层物理出发为光传送链路建模，制定光传送网规划，探索光传送网有关规律。
本课题的内容包括：
1) 对光传送链路进行简单建模 
2) 制定光传送网的规划，并探讨网络的价值
3）改进调制格式
## 2. 问题-1：光传送链路建模
现代数字传输系统可认为是对0101二进制序列进行编码传输的系统，1个二进制的0或1称为1个比特（bit）。无论是语音、视频还是任何类型的消息，都可以数字化为一串串”0101…”的二进制比特序列，经编码并调制为某个“载体信号”后，再经过特定的“信道”（信息的通道）传输到目的地。图1中给出了简化的模型。在光纤通信中，光纤就是信道，光纤传输的光波就是信息的载体。信道中无法避免的噪声可能导致最终接收的二进制序列中比特出错，即产生误码。

图1 简化后的数字传输模型
二进制序列通常需要将K个比特作为一个“符号”进行传输，每个符号有个不同状态。光传输利用光波的复振幅承载信号，因此可用复平面上不同的点来对应不同的符号状态，这种将符号状态画在复平面上的图称为“星座图”，图上的点称为“星座点”。如图2(a)所示的QPSK（Quadrature Phase Shift Keying）调制，经过信道叠加噪声和接收机处理后，接收端的星座图不再是理想的四个点，而是会出现扩散。当接收机收到1个符号时，就将发送的符号判定为离该符号最近的星座点。显然，如果噪声过大，接收到的符号可能被判错从而产生误码，如图2(b)中的蓝点。误码率（Bit Error Ratio, BER）定义为错误的比特数占总传输比特数的比例，例如传输了50个符号共100个比特，其中有1个符号被误判为相邻的符号，错误了1个bit，则误码率为0.01。BER是衡量通信系统性能的最根本指标，采用纠错编码，只要纠前BER小于某个门限值（BER容限点），纠错编码后就能实现纠后误码率为零的传输，本题中BER都是指纠错编码前的误码率（纠前BER）。

图2 星座图与噪声导致误码的示意图

图3 信号和噪声的相关定义示意图
图3中理想星座点用表示，接收到的符号用表示，则噪声为
                                 (1) 
噪声通常服从均值为0的正态分布。噪声的方差等于噪声的平均功率，定义为
                             (2)其中N为总共传输的符号数。信号平均功率定义为发送符号绝对值平方的均值：
                             (3)
定义信号和噪声功率的比值为信噪比（Signal-to-Noise Ratio, SNR），
                               (4)
工程上通常用dB作为SNR的单位，定义为
                     (5)
增大十倍为加10dB，减小0.5倍为减去3dB。本题中功率单位统一为毫瓦（mW），星座图实部和虚部单位为。
光传输链路由多个相同跨段的级联而成。如图4所示，几十km的光纤和一个放大器构成了1个跨段。信号每传输15km，光功率衰减一半，经过一段光纤传输后，需要用放大器对光功率进行补偿。在信号、噪声同步放大的同时，放大器还引入自发辐射噪声, 公式为，其中是是普朗克常数（），是光波频率（可定为193.1THz），B为带宽（设为50GHz），NF为噪声指数（可设为4），Gain为补偿光纤衰减所对应的功率增益。另一方面，光纤作为一种传输介质，其本身的非线性效应也会等效地引入噪声。其等效噪声功率与入纤功率近似呈平方关系，光纤功率为1mW时的非线性噪声约等于单个放大器噪声的2/3。放大器的自发辐射噪声和光纤的非线性噪声都是加性噪声。非线性噪声在每跨开头叠加，放大器噪声在每跨末尾叠加；每跨中间信噪比保持不变。每跨叠加的噪声间相互独立。

图4 基本的光传输链路模型
子问题-1）纠前误码率与信噪比计算
   星座图的编码分布模式也称为调制格式，对于给定的调制格式，BER和SNR呈一一对应的关系，纠前BER门限对应的SNR记做“SNR容限点”。给出图5中所示的三种调制格式及编码方式（相邻星座点距离相等），每个符号等概率出现，分别称为QPSK，8QAM (Quadrature Amplitude Modulation, QAM)，16QAM。请给出BER与SNR的关系曲线，BER=0.02时SNR容限点分别为多少？

图5 三种调制格式的编码方案
子问题-2）光链路性能计算
当单跨传输距离为80km和100km两种情况，以纠前误码率0.02为门限，图5给出的传输格式最远的传输距离（每跨距离×跨段数量）是多少？

## 3. 问题-2光传送网规划
表1给出进一步优化升级后的三种典型光传输设备参数。考虑到通信网络的目的是把更多的人更充分地连接到一起，我们按照如下方式定义网络的价值：
1） 每条直接连接两个城市/区域的链路当做1个连接，每个连接的价值定义为传输的容量与连接区域人口数的乘积（取两区域人口数乘积的0.5次方）
2） 网络的价值则是所有连接价值的加权和
                     (6)
以图5给出的北京、南京、上海三座城市为例，若相互之间均互有连接，根据城市的距离可得出能传输的容量。若每条链路的权重为1，进而再由人口算出网络价值（Network Value, NV）为
  (7)
其中m代表百万人(million)，, 该网络的连接数为3。
然而由于资源等因素制约，网络往往并不能让每对节点都直接连接，但可通过中间节点连接起来。以图5(b)为例，网络连接数为2，北京和南京之间需通过上海中转。若北京上海之间的传输仅保留一半容量(100Gb/s)，而另一半容量用于南京到北京的信号传输(100Gb/s)，相应地南京与上海之间的直接传输容量也会降低至300Gb/s，此时网络的价值为
         (8)
 根据需要两个节点之间也可以有多个连接。

图6 三个节点网络示意图
表1 不同传输格式的传输距离
单波传输容量
最大传输距离
总容量
100 Gb/s
3000 km
8 Tb/s
200 Gb/s
1200 km
16 Tb/s
400 Gb/s
600 km
32 Tb/s

请你们队考虑价值与需求为图6中的我国城市群制定光传送网规划，图中共有12个区域(其中北京/天津，深圳/广州均按1个区域对待)， 
子问题-1:如果连接数从16增加到33条时，不考虑中间节点，给出你们的两个网络规划及其价值。网络价值最多是多少？
子问题-2：存在中间节点，且两个节点之间可以有多个连接的情况下，重新解决子问题-1并给出所有中间节点传输容量的分配，假定每条链路容量可任意分配，只要总容量不超过表1的规定。如果由市扩大为省（区）影响如何？（人口请从网上查找）
子问题-3:光传送网络价值有多个侧面，例如从运营商的角度，连接经济发达的地区会带来更多的收入，从政府的角度保障发展相对滞后地区的通信是均衡发展的要求等。你队认为制定光传送网络规划的目标函数应该是什么？前面制定的规划有无变化？ 

图7 需要考虑的城市群
问题-3 改善星座图
由第一问可知，纠前BER不变时，降低SNR容限点可以提高系统容忍噪声的能力，从而延长链路的总长度。请尝试任意改变16QAM方案中星座点的位置、数量或每个点的概率，探索产生比图5中8QAM（相邻各星座点之间距离相等）具有更低SNR容限点的调制方案？调制格式的信息熵需保持为3bit。
信息熵定义为：
                            (9)
其中为每个符号状态出现的概率，N为状态数。图5所示的等概率情况下，QPSK、8QAM和16QAM的信息熵分别为2bit, 3bit和4bit。 